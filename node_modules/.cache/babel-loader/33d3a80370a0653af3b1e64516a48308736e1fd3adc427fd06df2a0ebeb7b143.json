{"ast":null,"code":"var _jsxFileName = \"E:\\\\projects\\\\react_project\\\\react-pro\\\\src\\\\context\\\\DataContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState, useEffect, children } from \"react\";\nimport Post from \"../Post\";\nimport PostLayout from \"../PostLayout\";\nimport { format } from 'date-fns';\nimport api from \"../api/posts\";\nimport EditPost from '../EditPost';\nimport useWindowSize from '../hooks/useWindowSize';\nimport useAxiosFetch from '../hooks/useAxiosFetch';\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DataContext = /*#__PURE__*/createContext({});\nexport const DataProvider = () => {\n  _s();\n  const [posts, setPosts] = useState([]);\n  const [searchResults, setSearchResults] = useState([]);\n  const [search, setSearch] = useState('');\n  const [postTitle, setPostTitle] = useState('');\n  const [postBody, setPostBody] = useState('');\n  const [editTitle, setEditTitle] = useState('');\n  const [editBody, setEditBody] = useState('');\n  const navigate = useNavigate();\n  const {\n    width\n  } = useWindowSize();\n  const {\n    data,\n    fetchError,\n    isLoading\n  } = useAxiosFetch('http://localhost:3600/posts');\n  useEffect(() => {\n    setPosts(data);\n  }, [data]);\n  useEffect(() => {\n    const filteredPosts = posts.filter(post => post.title.toLowerCase().includes(search.toLowerCase()) || post.body.toLowerCase().includes(search.toLowerCase()));\n    setSearchResults(filteredPosts);\n  }, [posts, search]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const id = posts.length ? posts[posts.length - 1].id + 1 : 1;\n    const datetime = format(new Date(), 'MMMM dd, yyyy pp');\n    const newPost = {\n      id,\n      title: postTitle,\n      datetime,\n      body: postBody\n    };\n    try {\n      const response = await api.post('/posts', newPost);\n      const allPosts = [...posts, response.data];\n      setPosts(allPosts);\n      setSearchResults(allPosts); // Update search results\n      setPostTitle('');\n      setPostBody('');\n      navigate('/');\n    } catch (err) {\n      if (err.response) {\n        console.log(err.response.data);\n        console.log(err.response.status);\n        console.log(err.response.headers);\n      } else {\n        console.log(`Error: ${err.message}`);\n      }\n    }\n  };\n  const handleEdit = async id => {\n    const datetime = format(new Date(), 'MMMM dd, yyyy pp');\n    const updatedPost = {\n      id,\n      title: editTitle,\n      datetime,\n      body: editBody\n    };\n    try {\n      const response = await api.put(`/posts/${id}`, updatedPost);\n      setPosts(posts.map(post => post.id === id ? {\n        ...response.data\n      } : post));\n      setEditTitle('');\n      setEditBody('');\n      navigate('/');\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  };\n  const handleDelete = async id => {\n    try {\n      await api.delete(`/posts/${id}`);\n      const postList = posts.filter(post => post.id !== id);\n      setPosts(postList);\n      navigate('/');\n    } catch (err) {\n      console.log(`Error: ${err.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: {\n      width,\n      search,\n      setSearch,\n      searchResults,\n      fetchError,\n      isLoading,\n      handleSubmit,\n      postTitle,\n      setPostTitle,\n      postBody,\n      setPostBody,\n      posts,\n      handleEdit,\n      editBody,\n      setEditBody,\n      editTitle,\n      setEditTitle,\n      handleDelete\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n};\n_s(DataProvider, \"vPqUyrjkDGWfXHCLseD9bIoo3XA=\", false, function () {\n  return [useNavigate, useWindowSize, useAxiosFetch];\n});\n_c = DataProvider;\nexport default DataContext;\nvar _c;\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"names":["createContext","useState","useEffect","children","Post","PostLayout","format","api","EditPost","useWindowSize","useAxiosFetch","useNavigate","jsxDEV","_jsxDEV","DataContext","DataProvider","_s","posts","setPosts","searchResults","setSearchResults","search","setSearch","postTitle","setPostTitle","postBody","setPostBody","editTitle","setEditTitle","editBody","setEditBody","navigate","width","data","fetchError","isLoading","filteredPosts","filter","post","title","toLowerCase","includes","body","handleSubmit","e","preventDefault","id","length","datetime","Date","newPost","response","allPosts","err","console","log","status","headers","message","handleEdit","updatedPost","put","map","handleDelete","delete","postList","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/projects/react_project/react-pro/src/context/DataContext.js"],"sourcesContent":["import { createContext,useState,useEffect, children } from \"react\";\r\nimport Post from \"../Post\";\r\nimport PostLayout from \"../PostLayout\"\r\nimport { format } from 'date-fns';\r\nimport api from \"../api/posts\";\r\nimport EditPost from '../EditPost';\r\nimport useWindowSize from '../hooks/useWindowSize';\r\nimport useAxiosFetch from '../hooks/useAxiosFetch';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst DataContext = createContext({})\r\n\r\nexport const DataProvider = () => {\r\n\r\n    const [posts, setPosts] = useState([]);\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [search, setSearch] = useState('');\r\n    const [postTitle, setPostTitle] = useState('');\r\n    const [postBody, setPostBody] = useState('');\r\n    const [editTitle, setEditTitle] = useState('');\r\n    const [editBody, setEditBody] = useState('');\r\n    const navigate = useNavigate();\r\n    const {width}=useWindowSize()\r\n    const {data,fetchError,isLoading} = useAxiosFetch('http://localhost:3600/posts')\r\n  \r\n    useEffect(() =>{\r\n      setPosts(data);\r\n    },[data]);\r\n  \r\n    useEffect(() => {\r\n      const filteredPosts = posts.filter(post =>\r\n        post.title.toLowerCase().includes(search.toLowerCase()) ||\r\n        post.body.toLowerCase().includes(search.toLowerCase())\r\n      );\r\n      setSearchResults(filteredPosts);\r\n    }, [posts, search]);\r\n  \r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      const id = posts.length ? posts[posts.length - 1].id + 1 : 1;\r\n      const datetime = format(new Date(), 'MMMM dd, yyyy pp');\r\n      const newPost = { id, title: postTitle, datetime, body: postBody };\r\n      try {\r\n        const response = await api.post('/posts', newPost);\r\n        const allPosts = [...posts, response.data];\r\n        setPosts(allPosts);\r\n        setSearchResults(allPosts); // Update search results\r\n        setPostTitle('');\r\n        setPostBody('');\r\n        navigate('/');\r\n      } catch (err) {\r\n        if (err.response) {\r\n          console.log(err.response.data);\r\n          console.log(err.response.status);\r\n          console.log(err.response.headers);\r\n        } else {\r\n          console.log(`Error: ${err.message}`);\r\n        }\r\n      }\r\n    };\r\n  \r\n    const handleEdit = async (id) => {\r\n      const datetime = format(new Date(), 'MMMM dd, yyyy pp');\r\n      const updatedPost = { id, title: editTitle, datetime, body: editBody };\r\n      try {\r\n        const response = await api.put(`/posts/${id}`, updatedPost);\r\n        setPosts(posts.map(post => post.id === id ? { ...response.data } : post));\r\n        setEditTitle('');\r\n        setEditBody('');\r\n        navigate('/');\r\n      } catch (err) {\r\n        console.log(`Error: ${err.message}`);\r\n      }\r\n    };\r\n  \r\n    const handleDelete = async (id) => {\r\n      try {\r\n        await api.delete(`/posts/${id}`);\r\n        const postList = posts.filter(post => post.id !== id);\r\n        setPosts(postList);\r\n        navigate('/');\r\n      } catch (err) {\r\n        console.log(`Error: ${err.message}`);\r\n      }\r\n    };\r\n\r\n    return (\r\n        <DataContext.Provider value={{\r\n            width, search, setSearch,\r\n            searchResults, fetchError, isLoading,\r\n            handleSubmit, postTitle, setPostTitle, postBody, setPostBody,\r\n            posts, handleEdit, editBody, setEditBody, editTitle, setEditTitle,\r\n            handleDelete,\r\n        }}>\r\n            {children}\r\n        </DataContext.Provider>\r\n    )\r\n}\r\n\r\nexport default DataContext"],"mappings":";;AAAA,SAASA,aAAa,EAACC,QAAQ,EAACC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClE,OAAOC,IAAI,MAAM,SAAS;AAC1B,OAAOC,UAAU,MAAM,eAAe;AACtC,SAASC,MAAM,QAAQ,UAAU;AACjC,OAAOC,GAAG,MAAM,cAAc;AAC9B,OAAOC,QAAQ,MAAM,aAAa;AAClC,OAAOC,aAAa,MAAM,wBAAwB;AAClD,OAAOC,aAAa,MAAM,wBAAwB;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,WAAW,gBAAGd,aAAa,CAAC,CAAC,CAAC,CAAC;AAErC,OAAO,MAAMe,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAE9B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACkB,aAAa,EAAEC,gBAAgB,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACoB,MAAM,EAAEC,SAAS,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACsB,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACwB,QAAQ,EAAEC,WAAW,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC0B,SAAS,EAAEC,YAAY,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAAC4B,QAAQ,EAAEC,WAAW,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM8B,QAAQ,GAAGpB,WAAW,CAAC,CAAC;EAC9B,MAAM;IAACqB;EAAK,CAAC,GAACvB,aAAa,CAAC,CAAC;EAC7B,MAAM;IAACwB,IAAI;IAACC,UAAU;IAACC;EAAS,CAAC,GAAGzB,aAAa,CAAC,6BAA6B,CAAC;EAEhFR,SAAS,CAAC,MAAK;IACbgB,QAAQ,CAACe,IAAI,CAAC;EAChB,CAAC,EAAC,CAACA,IAAI,CAAC,CAAC;EAET/B,SAAS,CAAC,MAAM;IACd,MAAMkC,aAAa,GAAGnB,KAAK,CAACoB,MAAM,CAACC,IAAI,IACrCA,IAAI,CAACC,KAAK,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpB,MAAM,CAACmB,WAAW,CAAC,CAAC,CAAC,IACvDF,IAAI,CAACI,IAAI,CAACF,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpB,MAAM,CAACmB,WAAW,CAAC,CAAC,CACvD,CAAC;IACDpB,gBAAgB,CAACgB,aAAa,CAAC;EACjC,CAAC,EAAE,CAACnB,KAAK,EAAEI,MAAM,CAAC,CAAC;EAEnB,MAAMsB,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,MAAMC,EAAE,GAAG7B,KAAK,CAAC8B,MAAM,GAAG9B,KAAK,CAACA,KAAK,CAAC8B,MAAM,GAAG,CAAC,CAAC,CAACD,EAAE,GAAG,CAAC,GAAG,CAAC;IAC5D,MAAME,QAAQ,GAAG1C,MAAM,CAAC,IAAI2C,IAAI,CAAC,CAAC,EAAE,kBAAkB,CAAC;IACvD,MAAMC,OAAO,GAAG;MAAEJ,EAAE;MAAEP,KAAK,EAAEhB,SAAS;MAAEyB,QAAQ;MAAEN,IAAI,EAAEjB;IAAS,CAAC;IAClE,IAAI;MACF,MAAM0B,QAAQ,GAAG,MAAM5C,GAAG,CAAC+B,IAAI,CAAC,QAAQ,EAAEY,OAAO,CAAC;MAClD,MAAME,QAAQ,GAAG,CAAC,GAAGnC,KAAK,EAAEkC,QAAQ,CAAClB,IAAI,CAAC;MAC1Cf,QAAQ,CAACkC,QAAQ,CAAC;MAClBhC,gBAAgB,CAACgC,QAAQ,CAAC,CAAC,CAAC;MAC5B5B,YAAY,CAAC,EAAE,CAAC;MAChBE,WAAW,CAAC,EAAE,CAAC;MACfK,QAAQ,CAAC,GAAG,CAAC;IACf,CAAC,CAAC,OAAOsB,GAAG,EAAE;MACZ,IAAIA,GAAG,CAACF,QAAQ,EAAE;QAChBG,OAAO,CAACC,GAAG,CAACF,GAAG,CAACF,QAAQ,CAAClB,IAAI,CAAC;QAC9BqB,OAAO,CAACC,GAAG,CAACF,GAAG,CAACF,QAAQ,CAACK,MAAM,CAAC;QAChCF,OAAO,CAACC,GAAG,CAACF,GAAG,CAACF,QAAQ,CAACM,OAAO,CAAC;MACnC,CAAC,MAAM;QACLH,OAAO,CAACC,GAAG,CAAC,UAAUF,GAAG,CAACK,OAAO,EAAE,CAAC;MACtC;IACF;EACF,CAAC;EAED,MAAMC,UAAU,GAAG,MAAOb,EAAE,IAAK;IAC/B,MAAME,QAAQ,GAAG1C,MAAM,CAAC,IAAI2C,IAAI,CAAC,CAAC,EAAE,kBAAkB,CAAC;IACvD,MAAMW,WAAW,GAAG;MAAEd,EAAE;MAAEP,KAAK,EAAEZ,SAAS;MAAEqB,QAAQ;MAAEN,IAAI,EAAEb;IAAS,CAAC;IACtE,IAAI;MACF,MAAMsB,QAAQ,GAAG,MAAM5C,GAAG,CAACsD,GAAG,CAAC,UAAUf,EAAE,EAAE,EAAEc,WAAW,CAAC;MAC3D1C,QAAQ,CAACD,KAAK,CAAC6C,GAAG,CAACxB,IAAI,IAAIA,IAAI,CAACQ,EAAE,KAAKA,EAAE,GAAG;QAAE,GAAGK,QAAQ,CAAClB;MAAK,CAAC,GAAGK,IAAI,CAAC,CAAC;MACzEV,YAAY,CAAC,EAAE,CAAC;MAChBE,WAAW,CAAC,EAAE,CAAC;MACfC,QAAQ,CAAC,GAAG,CAAC;IACf,CAAC,CAAC,OAAOsB,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,UAAUF,GAAG,CAACK,OAAO,EAAE,CAAC;IACtC;EACF,CAAC;EAED,MAAMK,YAAY,GAAG,MAAOjB,EAAE,IAAK;IACjC,IAAI;MACF,MAAMvC,GAAG,CAACyD,MAAM,CAAC,UAAUlB,EAAE,EAAE,CAAC;MAChC,MAAMmB,QAAQ,GAAGhD,KAAK,CAACoB,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACQ,EAAE,KAAKA,EAAE,CAAC;MACrD5B,QAAQ,CAAC+C,QAAQ,CAAC;MAClBlC,QAAQ,CAAC,GAAG,CAAC;IACf,CAAC,CAAC,OAAOsB,GAAG,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,UAAUF,GAAG,CAACK,OAAO,EAAE,CAAC;IACtC;EACF,CAAC;EAED,oBACI7C,OAAA,CAACC,WAAW,CAACoD,QAAQ;IAACC,KAAK,EAAE;MACzBnC,KAAK;MAAEX,MAAM;MAAEC,SAAS;MACxBH,aAAa;MAAEe,UAAU;MAAEC,SAAS;MACpCQ,YAAY;MAAEpB,SAAS;MAAEC,YAAY;MAAEC,QAAQ;MAAEC,WAAW;MAC5DT,KAAK;MAAE0C,UAAU;MAAE9B,QAAQ;MAAEC,WAAW;MAAEH,SAAS;MAAEC,YAAY;MACjEmC;IACJ,CAAE;IAAA5D,QAAA,EACGA;EAAQ;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B,CAAC;AAAAvD,EAAA,CArFYD,YAAY;EAAA,QASJJ,WAAW,EACdF,aAAa,EACSC,aAAa;AAAA;AAAA8D,EAAA,GAXxCzD,YAAY;AAuFzB,eAAeD,WAAW;AAAA,IAAA0D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}